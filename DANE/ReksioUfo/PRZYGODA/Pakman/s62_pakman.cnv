OBJECT=MUSIC
MUSIC:TYPE=MUSIC
MUSIC:FILENAME=KURAKIS.WAV

OBJECT=VARPLAYER
VARPLAYER:TYPE=INTEGER
VARPLAYER:VALUE=0

OBJECT=VARENEMY
VARENEMY:TYPE=INTEGER
VARENEMY:VALUE=0

OBJECT=VARITEMP1
VARITEMP1:TYPE=INTEGER
VARITEMP1:VALUE=0

OBJECT=VARITEMP2
VARITEMP2:TYPE=INTEGER
VARITEMP2:VALUE=0

OBJECT=VARITEMP3
VARITEMP3:TYPE=INTEGER
VARITEMP3:VALUE=0

OBJECT=VARITEMP4
VARITEMP4:TYPE=INTEGER
VARITEMP4:VALUE=0

OBJECT=VARFIELD
VARFIELD:TYPE=INTEGER
VARFIELD:ONCHANGED^2=BEHOPENDOOR
VARFIELD:ONBRUTALCHANGED^1=BEHCLOSEDOOR
VARFIELD:ONCHANGED^4=BEHTAKEKEY
VARFIELD:ONCHANGED^6=BEHOPENGATE

OBJECT=VARENDFIELD
VARENDFIELD:TYPE=INTEGER
VARENDFIELD:ONCHANGED^7=BEHONENDFIELD

OBJECT=VARSTEMP1
VARSTEMP1:TYPE=STRING

OBJECT=VARCANSWITCH
VARCANSWITCH:TYPE=INTEGER
VARCANSWITCH:VALUE=1

OBJECT=VAREND
VAREND:TYPE=INTEGER
VAREND:VALUE=0
VAREND:ONCHANGED^2=BEHINVILLAGE

OBJECT=ANNPLAYER0
ANNPLAYER0:TYPE=ANIMO
ANNPLAYER0:VISIBLE=TRUE
ANNPLAYER0:FILENAME=REKSIO.ANN
ANNPLAYER0:TOCANVAS=TRUE
ANNPLAYER0:PRIORITY=5
ANNPLAYER0:FPS=16
ANNPLAYER0:PRELOAD=TRUE
ANNPLAYER0:RELEASE=TRUE
ANNPLAYER0:MONITORCOLLISION=FALSE
ANNPLAYER0:MONITORCOLLISIONALPHA=FALSE
ANNPLAYER0:ONFINISHED^INIT={THIS^PLAY("IDLE");}
ANNPLAYER0:ONFINISHED^IDLE={THIS^PLAY("IDLE");}
ANNPLAYER0:ONFRAMECHANGED^UP={THIS^MOVE(0,-4);}
ANNPLAYER0:ONFRAMECHANGED^RIGHT={THIS^MOVE(4,0);}
ANNPLAYER0:ONFRAMECHANGED^DOWN={THIS^MOVE(0,4);}
ANNPLAYER0:ONFRAMECHANGED^LEFT={THIS^MOVE(-4,0);}
ANNPLAYER0:ONFINISHED^UP=BEHFINISHEDMOVE(0)
ANNPLAYER0:ONFINISHED^RIGHT=BEHFINISHEDMOVE(0)
ANNPLAYER0:ONFINISHED^DOWN=BEHFINISHEDMOVE(0)
ANNPLAYER0:ONFINISHED^LEFT=BEHFINISHEDMOVE(0)
ANNPLAYER0:ONFRAMECHANGED^IDLE=BEHCOMMAND(0)
ANNPLAYER0:ONFINISHED^DIE={THIS^PLAY("DIE");}

OBJECT=ANNPLAYER1
ANNPLAYER1:TYPE=ANIMO
ANNPLAYER1:VISIBLE=TRUE
ANNPLAYER1:FILENAME=KRET.ANN
ANNPLAYER1:TOCANVAS=TRUE
ANNPLAYER1:PRIORITY=5
ANNPLAYER1:FPS=16
ANNPLAYER1:PRELOAD=TRUE
ANNPLAYER1:RELEASE=TRUE
ANNPLAYER1:MONITORCOLLISION=FALSE
ANNPLAYER1:MONITORCOLLISIONALPHA=FALSE
ANNPLAYER1:ONFINISHED^INIT={THIS^PLAY("IDLE");}
ANNPLAYER1:ONFINISHED^IDLE={THIS^PLAY("IDLE");}
ANNPLAYER1:ONFRAMECHANGED^UP={THIS^MOVE(0,-4);}
ANNPLAYER1:ONFRAMECHANGED^RIGHT={THIS^MOVE(4,0);}
ANNPLAYER1:ONFRAMECHANGED^DOWN={THIS^MOVE(0,4);}
ANNPLAYER1:ONFRAMECHANGED^LEFT={THIS^MOVE(-4,0);}
ANNPLAYER1:ONFINISHED^UP=BEHFINISHEDMOVE(1)
ANNPLAYER1:ONFINISHED^RIGHT=BEHFINISHEDMOVE(1)
ANNPLAYER1:ONFINISHED^DOWN=BEHFINISHEDMOVE(1)
ANNPLAYER1:ONFINISHED^LEFT=BEHFINISHEDMOVE(1)
ANNPLAYER1:ONFRAMECHANGED^IDLE=BEHCOMMAND(1)
ANNPLAYER1:ONFINISHED^DIE={THIS^PLAY("DIE");}

OBJECT=ANNWORM
ANNWORM:TYPE=ANIMO
ANNWORM:VISIBLE=TRUE
ANNWORM:FILENAME=WORM.ANN
ANNWORM:TOCANVAS=TRUE
ANNWORM:PRIORITY=4
ANNWORM:FPS=16
ANNWORM:PRELOAD=TRUE
ANNWORM:RELEASE=TRUE
ANNWORM:MONITORCOLLISION=FALSE
ANNWORM:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNDOOR0
ANNDOOR0:TYPE=ANIMO
ANNDOOR0:VISIBLE=TRUE
ANNDOOR0:FILENAME=DOOR.ANN
ANNDOOR0:TOCANVAS=TRUE
ANNDOOR0:PRIORITY=0
ANNDOOR0:FPS=16
ANNDOOR0:PRELOAD=TRUE
ANNDOOR0:RELEASE=TRUE
ANNDOOR0:MONITORCOLLISION=FALSE
ANNDOOR0:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNDOOR1
ANNDOOR1:TYPE=ANIMO
ANNDOOR1:VISIBLE=TRUE
ANNDOOR1:FILENAME=DOOR2.ANN
ANNDOOR1:TOCANVAS=TRUE
ANNDOOR1:PRIORITY=0
ANNDOOR1:FPS=16
ANNDOOR1:PRELOAD=TRUE
ANNDOOR1:RELEASE=TRUE
ANNDOOR1:MONITORCOLLISION=FALSE
ANNDOOR1:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNGATE
ANNGATE:TYPE=ANIMO
ANNGATE:VISIBLE=TRUE
ANNGATE:FILENAME=GATE.ANN
ANNGATE:TOCANVAS=TRUE
ANNGATE:PRIORITY=0
ANNGATE:FPS=16
ANNGATE:PRELOAD=TRUE
ANNGATE:RELEASE=TRUE
ANNGATE:MONITORCOLLISION=FALSE
ANNGATE:MONITORCOLLISIONALPHA=FALSE

OBJECT=IMGEXITCLICK
IMGEXITCLICK:TYPE=IMAGE
IMGEXITCLICK:VISIBLE=TRUE
IMGEXITCLICK:FILENAME=EXITCLICK.IMG
IMGEXITCLICK:TOCANVAS=TRUE
IMGEXITCLICK:PRIORITY=90
IMGEXITCLICK:PRELOAD=TRUE
IMGEXITCLICK:RELEASE=TRUE
IMGEXITCLICK:MONITORCOLLISION=FALSE
IMGEXITCLICK:MONITORCOLLISIONALPHA=FALSE

OBJECT=IMGEXITGLOW
IMGEXITGLOW:TYPE=IMAGE
IMGEXITGLOW:VISIBLE=TRUE
IMGEXITGLOW:FILENAME=EXITGLOW.IMG
IMGEXITGLOW:TOCANVAS=TRUE
IMGEXITGLOW:PRIORITY=90
IMGEXITGLOW:PRELOAD=TRUE
IMGEXITGLOW:RELEASE=TRUE
IMGEXITGLOW:MONITORCOLLISION=FALSE
IMGEXITGLOW:MONITORCOLLISIONALPHA=FALSE

OBJECT=IMGEXITSTD
IMGEXITSTD:TYPE=IMAGE
IMGEXITSTD:VISIBLE=TRUE
IMGEXITSTD:FILENAME=EXITSTD.IMG
IMGEXITSTD:TOCANVAS=TRUE
IMGEXITSTD:PRIORITY=90
IMGEXITSTD:PRELOAD=TRUE
IMGEXITSTD:RELEASE=TRUE
IMGEXITSTD:MONITORCOLLISION=FALSE
IMGEXITSTD:MONITORCOLLISIONALPHA=FALSE

OBJECT=IMGKEY
IMGKEY:TYPE=IMAGE
IMGKEY:VISIBLE=TRUE
IMGKEY:FILENAME=KEY.IMG
IMGKEY:TOCANVAS=TRUE
IMGKEY:PRIORITY=0
IMGKEY:PRELOAD=TRUE
IMGKEY:RELEASE=TRUE
IMGKEY:MONITORCOLLISION=FALSE
IMGKEY:MONITORCOLLISIONALPHA=FALSE

OBJECT=IMGKEYS
IMGKEYS:TYPE=IMAGE
IMGKEYS:VISIBLE=TRUE
IMGKEYS:FILENAME=LABKURAKIS.IMG
IMGKEYS:TOCANVAS=TRUE
IMGKEYS:PRIORITY=60
IMGKEYS:PRELOAD=TRUE
IMGKEYS:RELEASE=TRUE
IMGKEYS:MONITORCOLLISION=FALSE
IMGKEYS:MONITORCOLLISIONALPHA=FALSE

OBJECT=BTNEXIT
BTNEXIT:TYPE=BUTTON
BTNEXIT:VISIBLE=TRUE
BTNEXIT:ENABLE=TRUE
BTNEXIT:DRAGGABLE=FALSE
BTNEXIT:GFXSTANDARD=IMGEXITSTD
BTNEXIT:GFXONCLICK=IMGEXITCLICK
BTNEXIT:GFXONMOVE=IMGEXITGLOW
BTNEXIT:ONRELEASED={PRZYGODA^GOTO("MENUGLOWNE");}

OBJECT=SNDNARRINTRO
SNDNARRINTRO:TYPE=SOUND
SNDNARRINTRO:FILENAME=NARR62_0_1.WAV
SNDNARRINTRO:PRELOAD=FALSE
SNDNARRINTRO:FLUSHAFTERPLAYED=FALSE
SNDNARRINTRO:ONFINISHED={ANNPLAYER0^PLAY("IDLE");ANNPLAYER1^PLAY("IDLE");VARPLAYER^SET(0);}

OBJECT=SNDNARRNOKEY
SNDNARRNOKEY:TYPE=SOUND
SNDNARRNOKEY:FILENAME=NARR62_0_2.WAV
SNDNARRNOKEY:PRELOAD=FALSE
SNDNARRNOKEY:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDNARRWORM
SNDNARRWORM:TYPE=SOUND
SNDNARRWORM:FILENAME=NARR62_0_3.WAV
SNDNARRWORM:PRELOAD=FALSE
SNDNARRWORM:FLUSHAFTERPLAYED=FALSE
SNDNARRWORM:ONFINISHED={PRZYGODA^GOTO("S62_PAKMAN");}

OBJECT=SNDNARRVILLAGE
SNDNARRVILLAGE:TYPE=SOUND
SNDNARRVILLAGE:FILENAME=NARR62_0_4.WAV
SNDNARRVILLAGE:PRELOAD=FALSE
SNDNARRVILLAGE:FLUSHAFTERPLAYED=FALSE
SNDNARRVILLAGE:ONFINISHED={PRZYGODA^GOTO("S63_OBOZ");}

OBJECT=SNDPLAYERWORM0
SNDPLAYERWORM0:TYPE=SOUND
SNDPLAYERWORM0:FILENAME=REKS62_0_1.WAV
SNDPLAYERWORM0:PRELOAD=FALSE
SNDPLAYERWORM0:FLUSHAFTERPLAYED=FALSE
SNDPLAYERWORM0:ONFINISHED={SNDNARRWORM^PLAY();}

OBJECT=SNDPLAYERWORM1
SNDPLAYERWORM1:TYPE=SOUND
SNDPLAYERWORM1:FILENAME=KRE62_0_1.WAV
SNDPLAYERWORM1:PRELOAD=FALSE
SNDPLAYERWORM1:FLUSHAFTERPLAYED=FALSE
SNDPLAYERWORM1:ONFINISHED={SNDNARRWORM^PLAY();}

OBJECT=ARRAIMOVES
ARRAIMOVES:TYPE=ARRAY

OBJECT=ARRWALLS
ARRWALLS:TYPE=ARRAY

OBJECT=ARRPLAYERPOSX
ARRPLAYERPOSX:TYPE=ARRAY

OBJECT=ARRPLAYERPOSY
ARRPLAYERPOSY:TYPE=ARRAY

OBJECT=ARRNEXTPOSX
ARRNEXTPOSX:TYPE=ARRAY

OBJECT=ARRNEXTPOSY
ARRNEXTPOSY:TYPE=ARRAY

OBJECT=ARRENEMYPOSX
ARRENEMYPOSX:TYPE=ARRAY

OBJECT=ARRENEMYPOSY
ARRENEMYPOSY:TYPE=ARRAY

OBJECT=ARRCURRENTFIELD
ARRCURRENTFIELD:TYPE=ARRAY

OBJECT=ARRLASTFIELD
ARRLASTFIELD:TYPE=ARRAY

OBJECT=ARRENEMYMOVE
ARRENEMYMOVE:TYPE=ARRAY

OBJECT=ARRCURRENTMOVE
ARRCURRENTMOVE:TYPE=ARRAY

OBJECT=ARRDIRX
ARRDIRX:TYPE=ARRAY

OBJECT=ARRDIRY
ARRDIRY:TYPE=ARRAY

OBJECT=ARRENEMYMASK
ARRENEMYMASK:TYPE=ARRAY

OBJECT=ARRMASK
ARRMASK:TYPE=ARRAY

OBJECT=ARRPOWS
ARRPOWS:TYPE=ARRAY

OBJECT=ARRVISIBLE
ARRVISIBLE:TYPE=ARRAY

OBJECT=ARRKEY
ARRKEY:TYPE=ARRAY

OBJECT=ARRPLAYERS
ARRPLAYERS:TYPE=ARRAY

OBJECT=MOUSE
MOUSE:TYPE=MOUSE

OBJECT=CNVLOADER
CNVLOADER:TYPE=CNVLOADER

OBJECT=CANVASOBSERVER
CANVASOBSERVER:TYPE=CANVAS_OBSERVER

OBJECT=CONDACTIVE
CONDACTIVE:TYPE=CONDITION
CONDACTIVE:OPERAND1=VARPLAYER
CONDACTIVE:OPERATOR=NOTEQUAL
CONDACTIVE:OPERAND2=VARITEMP1


OBJECT=CONDKEYUP
CONDKEYUP:TYPE=CONDITION
CONDKEYUP:OPERAND1=KEYBOARD^ISKEYDOWN("UP")
CONDKEYUP:OPERATOR=EQUAL
CONDKEYUP:OPERAND2=TRUE
CONDKEYUP:ONRUNTIMESUCCESS=BEHONMOVEUP
CONDKEYUP:ONRUNTIMEFAILED={CONDKEYRIGHT^CHECK(TRUE);}


OBJECT=CONDKEYRIGHT
CONDKEYRIGHT:TYPE=CONDITION
CONDKEYRIGHT:OPERAND1=KEYBOARD^ISKEYDOWN("RIGHT")
CONDKEYRIGHT:OPERATOR=EQUAL
CONDKEYRIGHT:OPERAND2=TRUE
CONDKEYRIGHT:ONRUNTIMESUCCESS=BEHONMOVERIGHT
CONDKEYRIGHT:ONRUNTIMEFAILED={CONDKEYDOWN^CHECK(TRUE);}


OBJECT=CONDKEYDOWN
CONDKEYDOWN:TYPE=CONDITION
CONDKEYDOWN:OPERAND1=KEYBOARD^ISKEYDOWN("DOWN")
CONDKEYDOWN:OPERATOR=EQUAL
CONDKEYDOWN:OPERAND2=TRUE
CONDKEYDOWN:ONRUNTIMESUCCESS=BEHONMOVEDOWN
CONDKEYDOWN:ONRUNTIMEFAILED={CONDKEYLEFT^CHECK(TRUE);}


OBJECT=CONDKEYLEFT
CONDKEYLEFT:TYPE=CONDITION
CONDKEYLEFT:OPERAND1=KEYBOARD^ISKEYDOWN("LEFT")
CONDKEYLEFT:OPERATOR=EQUAL
CONDKEYLEFT:OPERAND2=TRUE
CONDKEYLEFT:ONRUNTIMESUCCESS=BEHONMOVELEFT
CONDKEYLEFT:ONRUNTIMEFAILED={CONDKEYONE^CHECK(TRUE);}


OBJECT=CONDKEYONE
CONDKEYONE:TYPE=CONDITION
CONDKEYONE:OPERAND1=KEYBOARD^ISKEYDOWN("1")
CONDKEYONE:OPERATOR=EQUAL
CONDKEYONE:OPERAND2=TRUE
CONDKEYONE:ONRUNTIMESUCCESS=BEHSWITCHTO1
CONDKEYONE:ONRUNTIMEFAILED={CONDKEYTWO^CHECK(TRUE);}


OBJECT=CONDKEYTWO
CONDKEYTWO:TYPE=CONDITION
CONDKEYTWO:OPERAND1=KEYBOARD^ISKEYDOWN("2")
CONDKEYTWO:OPERATOR=EQUAL
CONDKEYTWO:OPERAND2=TRUE
CONDKEYTWO:ONRUNTIMESUCCESS=BEHSWITCHTO2


OBJECT=CONDPOSSIBLEMOVE
CONDPOSSIBLEMOVE:TYPE=COMPLEXCONDITION
CONDPOSSIBLEMOVE:CONDITION1=CONDWALLAHEAD
CONDPOSSIBLEMOVE:OPERATOR=OR
CONDPOSSIBLEMOVE:CONDITION2=CONDCLOSEDGATEAHEAD


OBJECT=CONDWALLAHEAD
CONDWALLAHEAD:TYPE=CONDITION
CONDWALLAHEAD:OPERAND1=VARFIELD
CONDWALLAHEAD:OPERATOR=EQUAL
CONDWALLAHEAD:OPERAND2=0


OBJECT=CONDCLOSEDGATEAHEAD
CONDCLOSEDGATEAHEAD:TYPE=COMPLEXCONDITION
CONDCLOSEDGATEAHEAD:CONDITION1=CONDGATEAHEAD
CONDCLOSEDGATEAHEAD:OPERATOR=AND
CONDCLOSEDGATEAHEAD:CONDITION2=CONDHASNTGOTKEY


OBJECT=CONDGATEAHEAD
CONDGATEAHEAD:TYPE=CONDITION
CONDGATEAHEAD:OPERAND1=VARFIELD
CONDGATEAHEAD:OPERATOR=EQUAL
CONDGATEAHEAD:OPERAND2=6


OBJECT=CONDNOMOVEX
CONDNOMOVEX:TYPE=CONDITION
CONDNOMOVEX:OPERAND1=[ARRNEXTPOSX^GET(VARPLAYER)-ARRPLAYERPOSX^GET(VARPLAYER)]
CONDNOMOVEX:OPERATOR=EQUAL
CONDNOMOVEX:OPERAND2=0


OBJECT=CONDNOMOVEY
CONDNOMOVEY:TYPE=CONDITION
CONDNOMOVEY:OPERAND1=[ARRNEXTPOSY^GET(VARPLAYER)-ARRPLAYERPOSY^GET(VARPLAYER)]
CONDNOMOVEY:OPERATOR=EQUAL
CONDNOMOVEY:OPERAND2=0


OBJECT=CONDDONTCLOSE
CONDDONTCLOSE:TYPE=CONDITION
CONDDONTCLOSE:OPERAND1=VARITEMP1
CONDDONTCLOSE:OPERATOR=EQUAL
CONDDONTCLOSE:OPERAND2=2


OBJECT=CONDHASNTGOTKEY
CONDHASNTGOTKEY:TYPE=CONDITION
CONDHASNTGOTKEY:OPERAND1=ARRKEY^GET(VARPLAYER)
CONDHASNTGOTKEY:OPERATOR=EQUAL
CONDHASNTGOTKEY:OPERAND2=0
CONDHASNTGOTKEY:ONRUNTIMESUCCESS={@IF("SNDNARRNOKEY^ISPLAYING()","_","FALSE","{SNDNARRNOKEY^PLAY();}","");}


OBJECT=CONDCOLLISION
CONDCOLLISION:TYPE=CONDITION
CONDCOLLISION:OPERAND1=VARSTEMP1
CONDCOLLISION:OPERATOR=EQUAL
CONDCOLLISION:OPERAND2="NULL"


OBJECT=CONDCHANGEMASK
CONDCHANGEMASK:TYPE=CONDITION
CONDCHANGEMASK:OPERAND1=VARITEMP2
CONDCHANGEMASK:OPERATOR=EQUAL
CONDCHANGEMASK:OPERAND2=1
CONDCHANGEMASK:ONRUNTIMESUCCESS=BEHCHANGEMASK


OBJECT=CONDVISIBLE
CONDVISIBLE:TYPE=CONDITION
CONDVISIBLE:OPERAND1=ARRVISIBLE^GET(VARENEMY)
CONDVISIBLE:OPERATOR=EQUAL
CONDVISIBLE:OPERAND2=0
CONDVISIBLE:ONRUNTIMESUCCESS={UFO^RUN(["ANNWORM_"+VARITEMP1],"SHOW");ARRVISIBLE^CHANGEAT(VARENEMY,1);}
CONDVISIBLE:ONRUNTIMEFAILED={UFO^RUN(["ANNWORM_"+VARITEMP1],"HIDE");ARRVISIBLE^CHANGEAT(VARENEMY,0);}


OBJECT=CONDCANSWITCH
CONDCANSWITCH:TYPE=CONDITION
CONDCANSWITCH:OPERAND1=VARCANSWITCH
CONDCANSWITCH:OPERATOR=EQUAL
CONDCANSWITCH:OPERAND2=1


OBJECT=CONDNOTONBRIDGE
CONDNOTONBRIDGE:TYPE=CONDITION
CONDNOTONBRIDGE:OPERAND1=UFO^RUN(["ARRAIMOVES_"+ARRPLAYERPOSY^GET(VARPLAYER)],"GET",ARRPLAYERPOSX^GET(VARPLAYER))
CONDNOTONBRIDGE:OPERATOR=NOTEQUAL
CONDNOTONBRIDGE:OPERAND2=99


OBJECT=CONDISATX
CONDISATX:TYPE=CONDITION
CONDISATX:OPERAND1=VARITEMP1
CONDISATX:OPERATOR=EQUAL
CONDISATX:OPERAND2=VARITEMP3


OBJECT=CONDISATY
CONDISATY:TYPE=CONDITION
CONDISATY:OPERAND1=VARITEMP2
CONDISATY:OPERATOR=EQUAL
CONDISATY:OPERAND2=VARITEMP4


OBJECT=CONDNEXTMOVE
CONDNEXTMOVE:TYPE=CONDITION
CONDNEXTMOVE:OPERAND1=VARITEMP1
CONDNEXTMOVE:OPERATOR=GREATER
CONDNEXTMOVE:OPERAND2=-1
CONDNEXTMOVE:ONRUNTIMESUCCESS=BEHDONEXTMOVE
CONDNEXTMOVE:ONRUNTIMEFAILED={VARITEMP1^SET(ARRCURRENTMOVE^GET(VARENEMY));BEHDONEXTMOVE^RUN();}


OBJECT=CCONDCANSWITCH
CCONDCANSWITCH:TYPE=COMPLEXCONDITION
CCONDCANSWITCH:CONDITION1=CONDCANSWITCH
CCONDCANSWITCH:OPERATOR=AND
CCONDCANSWITCH:CONDITION2=CONDNOTONBRIDGE


OBJECT=CCONDISATPOS
CCONDISATPOS:TYPE=COMPLEXCONDITION
CCONDISATPOS:CONDITION1=CONDISATX
CCONDISATPOS:OPERATOR=AND
CCONDISATPOS:CONDITION2=CONDISATY


OBJECT=KEYBOARD
KEYBOARD:TYPE=KEYBOARD

OBJECT=__INIT__
__INIT__:TYPE=BEHAVIOUR
__INIT__:CODE={VARLEVEL6^SET("S62_PAKMAN");ARRPLAYERS^ADD("ANNPLAYER0","ANNPLAYER1");ARRENEMYPOSX^ADD(1,4,3,9,12,17,19);ARRENEMYPOSY^ADD(6,5,17,8,3,5,15);ARRPLAYERPOSX^ADD(23,24);ARRPLAYERPOSY^ADD(13,13);ARRNEXTPOSX^ADD(0,0);ARRNEXTPOSY^ADD(0,0);ARRPOWS^ADD(2,4,8,16,32,64,128,256);ARRENEMYMASK^ADD(0,0,0,0,0,0,0);ARRMASK^ADD(30,480);ARRVISIBLE^ADD(0,0,0,0,0,0,0);BEHINITDESERT^RUN();ANNWORM^CLONE(7);S62_PAKMAN^RUNCLONES("ANNWORM",-1,-1,"BEHINITCLONES");ANNWORM^HIDE();VARITEMP1^SET([ARRPLAYERPOSY^GET(0)-1]);ANNPLAYER0^SETPOSITION([ARRPLAYERPOSX^GET(0)*32],[VARITEMP1*32]);VARITEMP1^SET([ARRPLAYERPOSY^GET(1)-1]);ANNPLAYER1^SETPOSITION([ARRPLAYERPOSX^GET(1)*32],[VARITEMP1*32]);ARRCURRENTFIELD^ADD(1,1);ARRLASTFIELD^ADD(1,1);VARITEMP4^SET(1);ANNDOOR0^SETPOSITION(32,410);ANNDOOR1^SETPOSITION(352,246);ANNGATE^SETPOSITION(90,68);ARRENEMYMOVE^ADD("WALK0","WALK1","WALK2","WALK3");ARRCURRENTMOVE^ADD(0,0,0,0,0,0,0);ARRDIRX^ADD(0,1,0,-1);ARRDIRY^ADD(-1,0,1,0);IMGKEY^SETPOSITION(32,96);ARRKEY^ADD(0,0);SNDNARRINTRO^PLAY();}


OBJECT=BEHINITDESERT
BEHINITDESERT:TYPE=BEHAVIOUR
BEHINITDESERT:CODE={ARRAIMOVES^CLONE(18);ARRWALLS^CLONE(18);ARRWALLS_1^ADD(0,0,0,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);ARRWALLS_2^ADD(0,0,7,0,0,0,1,1,1,1,1,0,1,0,0,1,1,1,0,1,0,2,0,0,0);ARRWALLS_3^ADD(0,0,0,6,0,0,1,0,1,0,1,0,1,1,1,1,0,1,1,1,1,1,0,0,0);ARRWALLS_4^ADD(0,4,0,1,0,1,1,1,1,0,1,1,1,0,1,0,0,0,0,0,0,0,0,2,0);ARRWALLS_5^ADD(0,1,0,1,1,1,0,1,0,0,0,0,0,0,1,0,1,1,1,0,1,1,1,1,0);ARRWALLS_6^ADD(0,1,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,1,0,0,0,0,1,0);ARRWALLS_7^ADD(0,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,0,1,0,1,1,1,1,0);ARRWALLS_8^ADD(0,1,0,0,0,1,0,0,0,1,1,1,1,1,1,0,1,0,1,0,1,0,0,1,0);ARRWALLS_9^ADD(0,1,1,0,1,1,1,0,0,0,0,0,0,0,0,0,1,0,1,0,1,0,1,1,0);ARRWALLS_10^ADD(0,0,1,0,1,0,1,0,1,1,1,1,1,1,0,0,0,0,1,0,1,0,0,1,0);ARRWALLS_11^ADD(0,1,1,0,1,0,1,0,0,0,1,0,1,0,0,1,1,1,1,0,1,1,1,1,0);ARRWALLS_12^ADD(0,1,0,0,1,1,1,0,1,1,1,1,1,1,1,1,0,1,0,0,1,1,0,0,0);ARRWALLS_13^ADD(0,1,1,1,1,0,0,0,1,0,0,1,0,0,0,1,0,1,0,1,1,1,1,1,1);ARRWALLS_14^ADD(0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,0,1,1,1,0,1,0,1,1);ARRWALLS_15^ADD(0,1,1,1,1,1,0,1,1,1,0,1,0,1,0,0,0,1,0,1,1,1,0,1,1);ARRWALLS_16^ADD(0,0,0,1,0,1,0,1,0,1,0,1,0,1,1,1,1,1,0,0,0,0,0,0,0);ARRWALLS_17^ADD(1,1,0,1,1,1,1,1,0,1,1,1,0,1,0,1,1,1,1,1,1,1,0,1,1);ARRWALLS_18^ADD(1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1);ARRAIMOVES_1^ADD(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);ARRAIMOVES_2^ADD(0,0,0,0,0,0,129,0,16,0,0,0,9,0,0,132,0,264,0,0,0,129,0,0,0);ARRAIMOVES_3^ADD(0,0,0,0,0,0,0,0,0,0,0,0,36,0,0,258,0,36,0,0,0,258,0,0,0);ARRAIMOVES_4^ADD(0,0,0,0,0,132,256,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,129,0);ARRAIMOVES_5^ADD(0,9,0,5,4,258,0,0,0,0,0,0,0,0,0,0,5,4,264,0,0,0,0,0,0);ARRAIMOVES_6^ADD(0,8,0,0,0,0,0,0,0,8,0,0,0,0,16,0,0,0,0,0,0,0,0,0,0);ARRAIMOVES_7^ADD(0,32,0,0,0,257,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,2,0);ARRAIMOVES_8^ADD(0,0,0,0,0,0,0,0,0,4,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0);ARRAIMOVES_9^ADD(0,4,8,0,0,2,16,0,0,0,0,99,0,0,0,0,0,0,0,0,0,0,0,0,0);ARRAIMOVES_10^ADD(0,0,0,0,0,0,0,0,0,0,8,0,16,0,0,0,0,0,0,0,0,0,0,0,0);ARRAIMOVES_11^ADD(0,8,16,0,0,0,0,0,0,0,0,0,0,0,0,8,0,64,48,0,0,8,0,17,0);ARRAIMOVES_12^ADD(0,0,0,0,4,0,2,0,0,0,65,132,2,0,0,0,0,0,0,0,0,0,0,0,0);ARRAIMOVES_13^ADD(0,4,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,2,0,0,0,0);ARRAIMOVES_14^ADD(0,99,0,0,0,0,0,0,0,0,0,0,0,8,0,16,0,0,0,0,0,0,0,0,0);ARRAIMOVES_15^ADD(0,0,0,9,0,256,0,132,0,264,0,0,0,0,0,0,0,0,0,2,0,16,0,0,0);ARRAIMOVES_16^ADD(0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,33,0,0,0,0,0,0,0);ARRAIMOVES_17^ADD(0,0,0,4,0,32,0,258,0,36,0,258,0,0,0,0,0,0,0,0,0,0,0,0,0);ARRAIMOVES_18^ADD(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);}


OBJECT=BEHINITCLONES
BEHINITCLONES:TYPE=BEHAVIOUR
BEHINITCLONES:CODE={VARITEMP1^SET([$1^GETCLONEINDEX()-1]);VARITEMP2^SET([ARRENEMYPOSY^GET(VARITEMP1)-1]);$1^SETPOSITION([ARRENEMYPOSX^GET(VARITEMP1)*32],[VARITEMP2*32]);$1^ADDBEHAVIOUR("ONFINISHED$INIT","BEHNEXTMOVE");$1^ADDBEHAVIOUR("ONFRAMECHANGED$WALK0","BEHEMOVEUP");$1^ADDBEHAVIOUR("ONFRAMECHANGED$WALK1","BEHEMOVERIGHT");$1^ADDBEHAVIOUR("ONFRAMECHANGED$WALK2","BEHEMOVEDOWN");$1^ADDBEHAVIOUR("ONFRAMECHANGED$WALK3","BEHEMOVELEFT");$1^ADDBEHAVIOUR("ONFINISHED$WALK0","BEHNEXTMOVE");$1^ADDBEHAVIOUR("ONFINISHED$WALK1","BEHNEXTMOVE");$1^ADDBEHAVIOUR("ONFINISHED$WALK2","BEHNEXTMOVE");$1^ADDBEHAVIOUR("ONFINISHED$WALK3","BEHNEXTMOVE");$1^SETFPS(RANDOM^GET(13,7));$1^PLAY("INIT");$1^SHOW();}


OBJECT=BEHCOMMAND
BEHCOMMAND:TYPE=BEHAVIOUR
BEHCOMMAND:CODE={VARITEMP1^SET($1);CONDACTIVE^ONE_BREAK(TRUE);CONDKEYUP^CHECK(TRUE);}


OBJECT=BEHONMOVEUP
BEHONMOVEUP:TYPE=BEHAVIOUR
BEHONMOVEUP:CODE={VARITEMP1^SET([ARRPLAYERPOSY^GET(VARPLAYER)-1]);VARITEMP1^CLAMP(1,18);ARRNEXTPOSX^CHANGEAT(VARPLAYER,ARRPLAYERPOSX^GET(VARPLAYER));ARRNEXTPOSY^CHANGEAT(VARPLAYER,VARITEMP1);CONDNOMOVEY^ONE_BREAK(TRUE);VARITEMP1^SET(UFO^RUN(["ARRWALLS_"+ARRNEXTPOSY^GET(VARPLAYER)],"GET",ARRNEXTPOSX^GET(VARPLAYER)));ARRCURRENTFIELD^CHANGEAT(VARPLAYER,VARITEMP1);VARFIELD^SET(VARITEMP1);CONDPOSSIBLEMOVE^ONE_BREAK(TRUE);UFO^RUN(["ARRWALLS_"+ARRPLAYERPOSY^GET(VARPLAYER)],"CHANGEAT",ARRPLAYERPOSX^GET(VARPLAYER),ARRLASTFIELD^GET(VARPLAYER));ARRLASTFIELD^CHANGEAT(VARPLAYER,VARFIELD);ARRPLAYERPOSX^CHANGEAT(VARPLAYER,ARRNEXTPOSX^GET(VARPLAYER));ARRPLAYERPOSY^CHANGEAT(VARPLAYER,ARRNEXTPOSY^GET(VARPLAYER));UFO^RUN(["ARRWALLS_"+ARRPLAYERPOSY^GET(VARPLAYER)],"CHANGEAT",ARRPLAYERPOSX^GET(VARPLAYER),0);UFO^RUN(["ANNPLAYER"+VARPLAYER],"PLAY","UP");}


OBJECT=BEHONMOVERIGHT
BEHONMOVERIGHT:TYPE=BEHAVIOUR
BEHONMOVERIGHT:CODE={VARITEMP1^SET([ARRPLAYERPOSX^GET(VARPLAYER)+1]);VARITEMP1^CLAMP(0,24);ARRNEXTPOSX^CHANGEAT(VARPLAYER,VARITEMP1);ARRNEXTPOSY^CHANGEAT(VARPLAYER,ARRPLAYERPOSY^GET(VARPLAYER));CONDNOMOVEX^ONE_BREAK(TRUE);VARITEMP1^SET(UFO^RUN(["ARRWALLS_"+ARRNEXTPOSY^GET(VARPLAYER)],"GET",ARRNEXTPOSX^GET(VARPLAYER)));ARRCURRENTFIELD^CHANGEAT(VARPLAYER,VARITEMP1);VARFIELD^SET(VARITEMP1);CONDPOSSIBLEMOVE^ONE_BREAK(TRUE);UFO^RUN(["ARRWALLS_"+ARRPLAYERPOSY^GET(VARPLAYER)],"CHANGEAT",ARRPLAYERPOSX^GET(VARPLAYER),ARRLASTFIELD^GET(VARPLAYER));ARRLASTFIELD^CHANGEAT(VARPLAYER,VARFIELD);ARRPLAYERPOSX^CHANGEAT(VARPLAYER,ARRNEXTPOSX^GET(VARPLAYER));ARRPLAYERPOSY^CHANGEAT(VARPLAYER,ARRNEXTPOSY^GET(VARPLAYER));UFO^RUN(["ARRWALLS_"+ARRPLAYERPOSY^GET(VARPLAYER)],"CHANGEAT",ARRPLAYERPOSX^GET(VARPLAYER),0);UFO^RUN(["ANNPLAYER"+VARPLAYER],"PLAY","RIGHT");}


OBJECT=BEHONMOVEDOWN
BEHONMOVEDOWN:TYPE=BEHAVIOUR
BEHONMOVEDOWN:CODE={VARITEMP1^SET([ARRPLAYERPOSY^GET(VARPLAYER)+1]);VARITEMP1^CLAMP(1,18);ARRNEXTPOSX^CHANGEAT(VARPLAYER,ARRPLAYERPOSX^GET(VARPLAYER));ARRNEXTPOSY^CHANGEAT(VARPLAYER,VARITEMP1);CONDNOMOVEY^ONE_BREAK(TRUE);VARITEMP1^SET(UFO^RUN(["ARRWALLS_"+ARRNEXTPOSY^GET(VARPLAYER)],"GET",ARRNEXTPOSX^GET(VARPLAYER)));ARRCURRENTFIELD^CHANGEAT(VARPLAYER,VARITEMP1);VARFIELD^SET(VARITEMP1);CONDPOSSIBLEMOVE^ONE_BREAK(TRUE);UFO^RUN(["ARRWALLS_"+ARRPLAYERPOSY^GET(VARPLAYER)],"CHANGEAT",ARRPLAYERPOSX^GET(VARPLAYER),ARRLASTFIELD^GET(VARPLAYER));ARRLASTFIELD^CHANGEAT(VARPLAYER,VARFIELD);ARRPLAYERPOSX^CHANGEAT(VARPLAYER,ARRNEXTPOSX^GET(VARPLAYER));ARRPLAYERPOSY^CHANGEAT(VARPLAYER,ARRNEXTPOSY^GET(VARPLAYER));UFO^RUN(["ARRWALLS_"+ARRPLAYERPOSY^GET(VARPLAYER)],"CHANGEAT",ARRPLAYERPOSX^GET(VARPLAYER),0);UFO^RUN(["ANNPLAYER"+VARPLAYER],"PLAY","DOWN");}


OBJECT=BEHONMOVELEFT
BEHONMOVELEFT:TYPE=BEHAVIOUR
BEHONMOVELEFT:CODE={VARITEMP1^SET([ARRPLAYERPOSX^GET(VARPLAYER)-1]);VARITEMP1^CLAMP(0,24);ARRNEXTPOSX^CHANGEAT(VARPLAYER,VARITEMP1);ARRNEXTPOSY^CHANGEAT(VARPLAYER,ARRPLAYERPOSY^GET(VARPLAYER));CONDNOMOVEX^ONE_BREAK(TRUE);VARITEMP1^SET(UFO^RUN(["ARRWALLS_"+ARRNEXTPOSY^GET(VARPLAYER)],"GET",ARRNEXTPOSX^GET(VARPLAYER)));ARRCURRENTFIELD^CHANGEAT(VARPLAYER,VARITEMP1);VARFIELD^SET(VARITEMP1);CONDPOSSIBLEMOVE^ONE_BREAK(TRUE);UFO^RUN(["ARRWALLS_"+ARRPLAYERPOSY^GET(VARPLAYER)],"CHANGEAT",ARRPLAYERPOSX^GET(VARPLAYER),ARRLASTFIELD^GET(VARPLAYER));ARRLASTFIELD^CHANGEAT(VARPLAYER,VARFIELD);ARRPLAYERPOSX^CHANGEAT(VARPLAYER,ARRNEXTPOSX^GET(VARPLAYER));ARRPLAYERPOSY^CHANGEAT(VARPLAYER,ARRNEXTPOSY^GET(VARPLAYER));UFO^RUN(["ARRWALLS_"+ARRPLAYERPOSY^GET(VARPLAYER)],"CHANGEAT",ARRPLAYERPOSX^GET(VARPLAYER),0);UFO^RUN(["ANNPLAYER"+VARPLAYER],"PLAY","LEFT");}


OBJECT=BEHFINISHEDMOVE
BEHFINISHEDMOVE:TYPE=BEHAVIOUR
BEHFINISHEDMOVE:CODE={VARPLAYER^SET($1);VARENDFIELD^SET(VARFIELD);VARITEMP1^SET([ARRPLAYERPOSX^GET($1)*32]);VARITEMP2^SET([ARRPLAYERPOSY^GET($1)-1]);VARITEMP2^MUL(32);UFO^RUN(["ANNPLAYER"+$1],"PLAY","IDLE");}


OBJECT=BEHSWITCHTO1
BEHSWITCHTO1:TYPE=BEHAVIOUR
BEHSWITCHTO1:CONDITION=CCONDCANSWITCH
BEHSWITCHTO1:CODE={VARPLAYER^SET(0);}


OBJECT=BEHSWITCHTO2
BEHSWITCHTO2:TYPE=BEHAVIOUR
BEHSWITCHTO2:CONDITION=CCONDCANSWITCH
BEHSWITCHTO2:CODE={VARPLAYER^SET(1);}


OBJECT=BEHOPENDOOR
BEHOPENDOOR:TYPE=BEHAVIOUR
BEHOPENDOOR:CODE={VARSTEMP1^SET(ANNDOOR0^GETFRAMENAME());@IF("VARSTEMP1","!_",""OPEN"","BFITMP0","");}


OBJECT=BEHOPEN
BEHOPEN:TYPE=BEHAVIOUR
BEHOPEN:CODE={ANNDOOR0^PLAY("DOOR");ANNDOOR1^PLAY("DOOR");ARRWALLS_14^CHANGEAT(1,1);ARRWALLS_9^CHANGEAT(11,1);}


OBJECT=BEHCLOSEDOOR
BEHCLOSEDOOR:TYPE=BEHAVIOUR
BEHCLOSEDOOR:CODE={VARITEMP1^SET(23);VARITEMP2^SET(4);VARITEMP3^SET(ARRPLAYERPOSX^GET(0));VARITEMP4^SET(ARRPLAYERPOSY^GET(0));CCONDISATPOS^ONE_BREAK(TRUE);VARITEMP3^SET(ARRPLAYERPOSX^GET(1));VARITEMP4^SET(ARRPLAYERPOSY^GET(1));CCONDISATPOS^ONE_BREAK(TRUE);VARITEMP1^SET(21);VARITEMP2^SET(2);VARITEMP3^SET(ARRPLAYERPOSX^GET(0));VARITEMP4^SET(ARRPLAYERPOSY^GET(0));CCONDISATPOS^ONE_BREAK(TRUE);VARITEMP3^SET(ARRPLAYERPOSX^GET(1));VARITEMP4^SET(ARRPLAYERPOSY^GET(1));CCONDISATPOS^ONE_BREAK(TRUE);VARSTEMP1^SET(ANNDOOR0^GETFRAMENAME());@IF("VARSTEMP1","!_",""CLOSED"","BFITMP1","");}


OBJECT=BEHCLOSE
BEHCLOSE:TYPE=BEHAVIOUR
BEHCLOSE:CODE={ANNDOOR0^PLAY("DOOR2");ANNDOOR1^PLAY("DOOR2");ARRWALLS_14^CHANGEAT(1,0);ARRWALLS_9^CHANGEAT(11,0);}


OBJECT=BEHTAKEKEY
BEHTAKEKEY:TYPE=BEHAVIOUR
BEHTAKEKEY:CODE={VARFIELD^SET(1);ARRKEY^CHANGEAT(VARPLAYER,1);IMGKEY^HIDE();UFO^RUN(["ARRWALLS_"+ARRPLAYERPOSY^GET(VARPLAYER)],"CHANGEAT",ARRPLAYERPOSX^GET(VARPLAYER),1);}


OBJECT=BEHOPENGATE
BEHOPENGATE:TYPE=BEHAVIOUR
BEHOPENGATE:CODE={CONDHASNTGOTKEY^ONE_BREAK(FALSE);VARFIELD^SET(1);UFO^RUN(["ARRWALLS_"+ARRPLAYERPOSY^GET(VARPLAYER)],"CHANGEAT",ARRPLAYERPOSX^GET(VARPLAYER),1);UFO^RUN(["ARRWALLS_"+2],"CHANGEAT",ARRPLAYERPOSX^GET(VARPLAYER),1);ANNGATE^PLAY("DOOR");}


OBJECT=BEHCOLLISION
BEHCOLLISION:TYPE=BEHAVIOUR
BEHCOLLISION:CODE={VARITEMP1^SET(UFO^RUN($1,"GETCENTERX"));VARITEMP2^SET(UFO^RUN($1,"GETCENTERY"));VARSTEMP1^SET(CANVASOBSERVER^GETGRAPHICSAT(VARITEMP1,VARITEMP2,TRUE,5,5,TRUE));CONDCOLLISION^ONE_BREAK(TRUE);VARITEMP1^SET(ARRPLAYERS^FIND(VARSTEMP1));ANNPLAYER0^PAUSE();ANNPLAYER1^PAUSE();UFO^RUN(["ANNPLAYER"+VARITEMP1],"PLAY","DIE");UFO^RUN(["ANNPLAYER"+VARITEMP1],"SETPRIORITY",10);UFO^RUN(["SNDPLAYERWORM"+VARITEMP1],"PLAY");}


OBJECT=BEHNEXTMOVE
BEHNEXTMOVE:TYPE=BEHAVIOUR
BEHNEXTMOVE:CODE={VARENEMY^SET(THIS^GETCLONEINDEX());VARENEMY^DEC();VARITEMP2^SET([ARRENEMYPOSY^GET(VARENEMY)-1]);VARITEMP2^MUL(32);VARITEMP2^SUB(10);VARITEMP1^SET([ARRENEMYPOSX^GET(VARENEMY)*32]);VARITEMP1^SUB(10);UFO^RUN(THIS^GETNAME(),"SETPOSITION",[VARITEMP1-28],[VARITEMP2-24]);VARITEMP1^SET(UFO^RUN(["ARRAIMOVES_"+ARRENEMYPOSY^GET(VARENEMY)],"GET",ARRENEMYPOSX^GET(VARENEMY)));VARITEMP2^SET(VARITEMP1);VARITEMP2^AND(1);CONDCHANGEMASK^CHECK(TRUE);VARITEMP1^AND(ARRMASK^GET(ARRENEMYMASK^GET(VARENEMY)));VARITEMP1^SET(ARRPOWS^FIND(VARITEMP1));VARITEMP1^MOD(4);CONDNEXTMOVE^CHECK(TRUE);VARITEMP1^SET([VARENEMY+1]);CONDVISIBLE^CHECK(TRUE);}


OBJECT=BEHDONEXTMOVE
BEHDONEXTMOVE:TYPE=BEHAVIOUR
BEHDONEXTMOVE:CODE={VARITEMP2^SET(ARRENEMYPOSX^GET(VARENEMY));VARITEMP2^ADD(ARRDIRX^GET(VARITEMP1));ARRENEMYPOSX^CHANGEAT(VARENEMY,VARITEMP2);VARITEMP2^SET(ARRENEMYPOSY^GET(VARENEMY));VARITEMP2^ADD(ARRDIRY^GET(VARITEMP1));ARRENEMYPOSY^CHANGEAT(VARENEMY,VARITEMP2);ARRCURRENTMOVE^CHANGEAT(VARENEMY,VARITEMP1);VARITEMP2^SET(VARENEMY);VARITEMP2^INC();UFO^RUN(["ANNWORM_"+VARITEMP2],"PLAY",ARRENEMYMOVE^GET(VARITEMP1));}


OBJECT=BEHEMOVEUP
BEHEMOVEUP:TYPE=BEHAVIOUR
BEHEMOVEUP:CODE={VARSTEMP1^SET(THIS^GETNAME());BEHCOLLISION^RUN("VARSTEMP1","0","-4");}


OBJECT=BEHEMOVERIGHT
BEHEMOVERIGHT:TYPE=BEHAVIOUR
BEHEMOVERIGHT:CODE={VARSTEMP1^SET(THIS^GETNAME());BEHCOLLISION^RUN("VARSTEMP1","4","0");}


OBJECT=BEHEMOVEDOWN
BEHEMOVEDOWN:TYPE=BEHAVIOUR
BEHEMOVEDOWN:CODE={VARSTEMP1^SET(THIS^GETNAME());BEHCOLLISION^RUN("VARSTEMP1","0","4");}


OBJECT=BEHEMOVELEFT
BEHEMOVELEFT:TYPE=BEHAVIOUR
BEHEMOVELEFT:CODE={VARSTEMP1^SET(THIS^GETNAME());BEHCOLLISION^RUN("VARSTEMP1","-4","0");}


OBJECT=BEHCHANGEMASK
BEHCHANGEMASK:TYPE=BEHAVIOUR
BEHCHANGEMASK:CODE={VARITEMP2^SET(ARRENEMYMASK^GET(VARENEMY));VARITEMP2^INC();VARITEMP2^MOD(2);ARRENEMYMASK^CHANGEAT(VARENEMY,VARITEMP2);}


OBJECT=BEHONENDFIELD
BEHONENDFIELD:TYPE=BEHAVIOUR
BEHONENDFIELD:CODE={UFO^RUN(["ANNPLAYER"+VARPLAYER],"PAUSE");VARPLAYER^INC();VARPLAYER^MOD(2);VARCANSWITCH^SET(0);VAREND^INC();}


OBJECT=BEHINVILLAGE
BEHINVILLAGE:TYPE=BEHAVIOUR
BEHINVILLAGE:CODE={ANNPLAYER0^PAUSE();ANNPLAYER1^PAUSE();SNDNARRVILLAGE^PLAY();}


OBJECT=BFITMP0
BFITMP0:TYPE=BEHAVIOUR
BFITMP0:CODE={BEHOPEN^RUN();}


OBJECT=BFITMP1
BFITMP1:TYPE=BEHAVIOUR
BFITMP1:CODE={BEHCLOSE^RUN();}


