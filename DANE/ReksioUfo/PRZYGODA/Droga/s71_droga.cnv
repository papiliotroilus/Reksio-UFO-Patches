OBJECT=MUSIC
MUSIC:TYPE=MUSIC
MUSIC:FILENAME=KURAN.WAV

OBJECT=VARENEMY
VARENEMY:TYPE=INTEGER
VARENEMY:VALUE=0

OBJECT=VARITEMP1
VARITEMP1:TYPE=INTEGER
VARITEMP1:VALUE=0

OBJECT=VARITEMP2
VARITEMP2:TYPE=INTEGER
VARITEMP2:VALUE=0

OBJECT=VARITEMP3
VARITEMP3:TYPE=INTEGER
VARITEMP3:VALUE=0

OBJECT=VARITEMP4
VARITEMP4:TYPE=INTEGER
VARITEMP4:VALUE=0

OBJECT=VARSTEMP1
VARSTEMP1:TYPE=STRING

OBJECT=VARBTEMP1
VARBTEMP1:TYPE=BOOL

OBJECT=VARDETECTCOLLISION
VARDETECTCOLLISION:TYPE=INTEGER
VARDETECTCOLLISION:VALUE=1

OBJECT=ANNREKSIO
ANNREKSIO:TYPE=ANIMO
ANNREKSIO:VISIBLE=TRUE
ANNREKSIO:FILENAME=REKSIO.ANN
ANNREKSIO:TOCANVAS=TRUE
ANNREKSIO:PRIORITY=5
ANNREKSIO:FPS=16
ANNREKSIO:PRELOAD=TRUE
ANNREKSIO:RELEASE=TRUE
ANNREKSIO:MONITORCOLLISION=FALSE
ANNREKSIO:MONITORCOLLISIONALPHA=FALSE
ANNREKSIO:ONINIT=BEHINIT
ANNREKSIO:ONFINISHED^INIT={THIS^PLAY("IDLE");}
ANNREKSIO:ONFRAMECHANGED^UP=BEHMOVEUP
ANNREKSIO:ONFRAMECHANGED^RIGHT=BEHMOVERIGHT
ANNREKSIO:ONFRAMECHANGED^DOWN=BEHMOVEDOWN
ANNREKSIO:ONFRAMECHANGED^LEFT=BEHMOVELEFT
ANNREKSIO:ONFINISHED^UP={THIS^PLAY("IDLE");}
ANNREKSIO:ONFINISHED^RIGHT={THIS^PLAY("IDLE");}
ANNREKSIO:ONFINISHED^DOWN={THIS^PLAY("IDLE");}
ANNREKSIO:ONFINISHED^LEFT={THIS^PLAY("IDLE");}
ANNREKSIO:ONFINISHED^IDLE={THIS^PLAY("IDLE");}
ANNREKSIO:ONFRAMECHANGED^IDLE={CONDKEYUP^CHECK(TRUE);}

OBJECT=ANNKURA
ANNKURA:TYPE=ANIMO
ANNKURA:VISIBLE=TRUE
ANNKURA:FILENAME=UFOKURA.ANN
ANNKURA:TOCANVAS=TRUE
ANNKURA:PRIORITY=0
ANNKURA:FPS=16
ANNKURA:PRELOAD=TRUE
ANNKURA:RELEASE=TRUE
ANNKURA:MONITORCOLLISION=FALSE
ANNKURA:MONITORCOLLISIONALPHA=FALSE

OBJECT=IMGALPHA
IMGALPHA:TYPE=IMAGE
IMGALPHA:VISIBLE=FALSE
IMGALPHA:FILENAME=ALPHA.IMG
IMGALPHA:TOCANVAS=TRUE
IMGALPHA:PRIORITY=10
IMGALPHA:PRELOAD=TRUE
IMGALPHA:RELEASE=TRUE
IMGALPHA:MONITORCOLLISION=FALSE
IMGALPHA:MONITORCOLLISIONALPHA=FALSE

OBJECT=IMGEXITCLICK
IMGEXITCLICK:TYPE=IMAGE
IMGEXITCLICK:VISIBLE=TRUE
IMGEXITCLICK:FILENAME=EXITCLICK.IMG
IMGEXITCLICK:TOCANVAS=TRUE
IMGEXITCLICK:PRIORITY=99
IMGEXITCLICK:PRELOAD=TRUE
IMGEXITCLICK:RELEASE=TRUE
IMGEXITCLICK:MONITORCOLLISION=FALSE
IMGEXITCLICK:MONITORCOLLISIONALPHA=FALSE

OBJECT=IMGEXITGLOW
IMGEXITGLOW:TYPE=IMAGE
IMGEXITGLOW:VISIBLE=TRUE
IMGEXITGLOW:FILENAME=EXITGLOW.IMG
IMGEXITGLOW:TOCANVAS=TRUE
IMGEXITGLOW:PRIORITY=99
IMGEXITGLOW:PRELOAD=TRUE
IMGEXITGLOW:RELEASE=TRUE
IMGEXITGLOW:MONITORCOLLISION=FALSE
IMGEXITGLOW:MONITORCOLLISIONALPHA=FALSE

OBJECT=IMGEXITSTD
IMGEXITSTD:TYPE=IMAGE
IMGEXITSTD:VISIBLE=TRUE
IMGEXITSTD:FILENAME=EXITSTD.IMG
IMGEXITSTD:TOCANVAS=TRUE
IMGEXITSTD:PRIORITY=99
IMGEXITSTD:PRELOAD=TRUE
IMGEXITSTD:RELEASE=TRUE
IMGEXITSTD:MONITORCOLLISION=FALSE
IMGEXITSTD:MONITORCOLLISIONALPHA=FALSE

OBJECT=PLATFORMY
PLATFORMY:TYPE=IMAGE
PLATFORMY:VISIBLE=TRUE
PLATFORMY:FILENAME=PLATFORMY.IMG
PLATFORMY:TOCANVAS=TRUE
PLATFORMY:PRIORITY=8
PLATFORMY:PRELOAD=TRUE
PLATFORMY:RELEASE=TRUE
PLATFORMY:MONITORCOLLISION=FALSE
PLATFORMY:MONITORCOLLISIONALPHA=FALSE

OBJECT=BTNEXIT
BTNEXIT:TYPE=BUTTON
BTNEXIT:VISIBLE=TRUE
BTNEXIT:ENABLE=TRUE
BTNEXIT:DRAGGABLE=FALSE
BTNEXIT:GFXSTANDARD=IMGEXITSTD
BTNEXIT:GFXONCLICK=IMGEXITCLICK
BTNEXIT:GFXONMOVE=IMGEXITGLOW
BTNEXIT:ONRELEASED={PRZYGODA^GOTO("MENUGLOWNE");}

OBJECT=SNDNARRINTRO
SNDNARRINTRO:TYPE=SOUND
SNDNARRINTRO:FILENAME=NARR71_0_1.WAV
SNDNARRINTRO:PRELOAD=FALSE
SNDNARRINTRO:FLUSHAFTERPLAYED=FALSE
SNDNARRINTRO:ONFINISHED={ANNREKSIO^PLAY("INIT");}

OBJECT=SNDNARRAFTER
SNDNARRAFTER:TYPE=SOUND
SNDNARRAFTER:FILENAME=NARR71_0_2.WAV
SNDNARRAFTER:PRELOAD=FALSE
SNDNARRAFTER:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDUFOK0
SNDUFOK0:TYPE=SOUND
SNDUFOK0:FILENAME=UFK71_0_1.WAV
SNDUFOK0:PRELOAD=FALSE
SNDUFOK0:FLUSHAFTERPLAYED=FALSE
SNDUFOK0:ONFINISHED=BEHRESTART

OBJECT=SNDUFOK1
SNDUFOK1:TYPE=SOUND
SNDUFOK1:FILENAME=UFK71_0_2.WAV
SNDUFOK1:PRELOAD=FALSE
SNDUFOK1:FLUSHAFTERPLAYED=FALSE
SNDUFOK1:ONFINISHED=BEHRESTART

OBJECT=ARRDIRS
ARRDIRS:TYPE=ARRAY

OBJECT=MOUSE
MOUSE:TYPE=MOUSE

OBJECT=CNVLOADER
CNVLOADER:TYPE=CNVLOADER

OBJECT=CANVASOBSERVER
CANVASOBSERVER:TYPE=CANVAS_OBSERVER

OBJECT=CONDKEYUP
CONDKEYUP:TYPE=CONDITION
CONDKEYUP:OPERAND1=KEYBOARD^ISKEYDOWN("UP")
CONDKEYUP:OPERATOR=EQUAL
CONDKEYUP:OPERAND2=TRUE
CONDKEYUP:ONRUNTIMESUCCESS={VARBTEMP1^SET(ANNREKSIO^ISPLAYING("UP"));@IF("VARBTEMP1","_","FALSE","BEHONMOVEUP","");}
CONDKEYUP:ONRUNTIMEFAILED={CONDKEYRIGHT^CHECK(TRUE);}


OBJECT=CONDKEYLEFT
CONDKEYLEFT:TYPE=CONDITION
CONDKEYLEFT:OPERAND1=KEYBOARD^ISKEYDOWN("LEFT")
CONDKEYLEFT:OPERATOR=EQUAL
CONDKEYLEFT:OPERAND2=TRUE
CONDKEYLEFT:ONRUNTIMESUCCESS={VARBTEMP1^SET(ANNREKSIO^ISPLAYING("LEFT"));@IF("VARBTEMP1","_","FALSE","BEHONMOVELEFT","");}
CONDKEYLEFT:ONRUNTIMEFAILED={CONDIDLE^CHECK(TRUE);}


OBJECT=CONDKEYDOWN
CONDKEYDOWN:TYPE=CONDITION
CONDKEYDOWN:OPERAND1=KEYBOARD^ISKEYDOWN("DOWN")
CONDKEYDOWN:OPERATOR=EQUAL
CONDKEYDOWN:OPERAND2=TRUE
CONDKEYDOWN:ONRUNTIMESUCCESS={VARBTEMP1^SET(ANNREKSIO^ISPLAYING("DOWN"));@IF("VARBTEMP1","_","FALSE","BEHONMOVEDOWN","");}
CONDKEYDOWN:ONRUNTIMEFAILED={CONDKEYLEFT^CHECK(TRUE);}


OBJECT=CONDKEYRIGHT
CONDKEYRIGHT:TYPE=CONDITION
CONDKEYRIGHT:OPERAND1=KEYBOARD^ISKEYDOWN("RIGHT")
CONDKEYRIGHT:OPERATOR=EQUAL
CONDKEYRIGHT:OPERAND2=TRUE
CONDKEYRIGHT:ONRUNTIMESUCCESS={VARBTEMP1^SET(ANNREKSIO^ISPLAYING("RIGHT"));@IF("VARBTEMP1","_","FALSE","BEHONMOVERIGHT","");}
CONDKEYRIGHT:ONRUNTIMEFAILED={CONDKEYDOWN^CHECK(TRUE);}


OBJECT=CONDIDLE
CONDIDLE:TYPE=CONDITION
CONDIDLE:OPERAND1=ANNREKSIO^ISPLAYING("IDLE")
CONDIDLE:OPERATOR=EQUAL
CONDIDLE:OPERAND2=FALSE
CONDIDLE:ONRUNTIMESUCCESS={ANNREKSIO^PLAY("IDLE");}


OBJECT=CONDDETECT
CONDDETECT:TYPE=CONDITION
CONDDETECT:OPERAND1=VARDETECTCOLLISION
CONDDETECT:OPERATOR=EQUAL
CONDDETECT:OPERAND2=1
CONDDETECT:ONRUNTIMESUCCESS={CONDCOLLSION^CHECK(TRUE);}


OBJECT=CONDCOLLSION
CONDCOLLSION:TYPE=CONDITION
CONDCOLLSION:OPERAND1=UFO^RUN(VARSTEMP1,"ISNEAR","ANNREKSIO",1)
CONDCOLLSION:OPERATOR=EQUAL
CONDCOLLSION:OPERAND2=TRUE
CONDCOLLSION:ONRUNTIMESUCCESS=BEHISNEAR


OBJECT=CONDALPHA
CONDALPHA:TYPE=CONDITION
CONDALPHA:OPERAND1=IMGALPHA^GETALPHA(VARITEMP1,VARITEMP2)
CONDALPHA:OPERATOR=EQUAL
CONDALPHA:OPERAND2=38
CONDALPHA:ONRUNTIMESUCCESS={ANNREKSIO^MOVE(VARITEMP3,VARITEMP4);}


OBJECT=CONDSUCCESS
CONDSUCCESS:TYPE=CONDITION
CONDSUCCESS:OPERAND1=ANNREKSIO^GETPOSITIONX()
CONDSUCCESS:OPERATOR=LESS
CONDSUCCESS:OPERAND2=32
CONDSUCCESS:ONRUNTIMESUCCESS={VAR_BRAMA^SET(1);PRZYGODA^GOTO("S72_0_BRAMA");}


OBJECT=CONDRIGHT
CONDRIGHT:TYPE=CONDITION
CONDRIGHT:OPERAND1=ANNREKSIO^GETPOSITIONX()
CONDRIGHT:OPERATOR=GREATER
CONDRIGHT:OPERAND2=760


OBJECT=CONDNARRR
CONDNARRR:TYPE=CONDITION
CONDNARRR:OPERAND1=VARRETURNNARR
CONDNARRR:OPERATOR=EQUAL
CONDNARRR:OPERAND2=1
CONDNARRR:ONRUNTIMESUCCESS={SNDNARRAFTER^PLAY();ANNREKSIO^PLAY("INIT");}
CONDNARRR:ONRUNTIMEFAILED={SNDNARRINTRO^PLAY();}


OBJECT=KEYBOARD
KEYBOARD:TYPE=KEYBOARD

OBJECT=BEHINIT
BEHINIT:TYPE=BEHAVIOUR
BEHINIT:CODE={VARLEVEL7^SET("S71_DROGA");VARITEMP1^SET(23);VARITEMP1^MUL(32);VARITEMP2^SET(9);VARITEMP2^MUL(32);ANNREKSIO^SETPOSITION(VARITEMP1,VARITEMP2);ANNREKSIO^SETFPS(20);ARRDIRS^ADD("CW","CW","CW","CW","CW","CCW");ARRDIRS^ADD("CCW","CCW","CW","CW","CW","CW");ARRDIRS^ADD("CCW","CCW","CW","CW","CW","CCW");VARDETECTCOLLISION^SET(1);ANNKURA^CLONE(13);S71_DROGA^RUNCLONES("ANNKURA",-1,-1,"BEHINITCLONES");ANNKURA_1^SETPOSITION(289,169);ANNKURA_2^SETPOSITION(230,300);ANNKURA_3^SETPOSITION(100,300);ANNKURA_4^SETPOSITION(358,332);ANNKURA_5^SETPOSITION(180,164);ANNKURA_6^SETPOSITION(563,196);ANNKURA_7^SETPOSITION(545,315);ANNKURA_8^SETPOSITION(100,300);ANNKURA_9^SETPOSITION(481,126);ANNKURA_10^SETPOSITION(360,140);ANNKURA_11^SETPOSITION(190,410);ANNKURA_12^SETPOSITION(415,400);ANNKURA_13^SETPOSITION(448,255);ANNKURA_1^PLAY(ARRDIRS^GET(1));ANNKURA_1^SETFRAME(ARRDIRS^GET(1),10);ANNKURA_2^PLAY(ARRDIRS^GET(2));ANNKURA_2^SETFRAME(ARRDIRS^GET(2),15);ANNKURA_3^PLAY(ARRDIRS^GET(3));ANNKURA_3^SETFRAME(ARRDIRS^GET(3),1);ANNKURA_4^PLAY(ARRDIRS^GET(4));ANNKURA_4^SETFRAME(ARRDIRS^GET(4),20);ANNKURA_5^PLAY(ARRDIRS^GET(5));ANNKURA_5^SETFRAME(ARRDIRS^GET(5),12);ANNKURA_6^PLAY(ARRDIRS^GET(6));ANNKURA_6^SETFRAME(ARRDIRS^GET(6),3);ANNKURA_7^PLAY(ARRDIRS^GET(7));ANNKURA_7^SETFRAME(ARRDIRS^GET(4),7);ANNKURA_8^PLAY(ARRDIRS^GET(8));ANNKURA_8^SETFRAME(ARRDIRS^GET(4),9);ANNKURA_9^PLAY(ARRDIRS^GET(9));ANNKURA_9^SETFRAME(ARRDIRS^GET(4),11);ANNKURA_10^PLAY(ARRDIRS^GET(10));ANNKURA_10^SETFRAME(ARRDIRS^GET(4),19);ANNKURA_11^PLAY(ARRDIRS^GET(11));ANNKURA_11^SETFRAME(ARRDIRS^GET(4),17);ANNKURA_12^PLAY(ARRDIRS^GET(12));ANNKURA_12^SETFRAME(ARRDIRS^GET(4),14);ANNKURA_13^PLAY(ARRDIRS^GET(13));ANNKURA_13^SETFRAME(ARRDIRS^GET(4),12);ANNKURA^HIDE();CONDNARRR^CHECK(TRUE);VARRETURNNARR^SET(1);}


OBJECT=BEHINITCLONES
BEHINITCLONES:TYPE=BEHAVIOUR
BEHINITCLONES:CODE={$1^ADDBEHAVIOUR("ONFINISHED$CCW","BEHNEXTDIR");$1^ADDBEHAVIOUR("ONFINISHED$CW","BEHNEXTDIR");$1^ADDBEHAVIOUR("ONFRAMECHANGED$CW","BEHCOLLISION");$1^ADDBEHAVIOUR("ONFRAMECHANGED$CCW","BEHCOLLISION");$1^SETPRIORITY(5);}


OBJECT=BEHONMOVEUP
BEHONMOVEUP:TYPE=BEHAVIOUR
BEHONMOVEUP:CODE={ANNREKSIO^PLAY("UP");}


OBJECT=BEHMOVEUP
BEHMOVEUP:TYPE=BEHAVIOUR
BEHMOVEUP:CODE={BEHMOVE^RUN("0",""-4"");CONDKEYUP^CHECK(TRUE);}


OBJECT=BEHONMOVERIGHT
BEHONMOVERIGHT:TYPE=BEHAVIOUR
BEHONMOVERIGHT:CODE={ANNREKSIO^PLAY("RIGHT");}


OBJECT=BEHMOVERIGHT
BEHMOVERIGHT:TYPE=BEHAVIOUR
BEHMOVERIGHT:CODE={CONDRIGHT^ONE_BREAK(TRUE);BEHMOVE^RUN("4","0");CONDKEYUP^CHECK(TRUE);}


OBJECT=BEHONMOVEDOWN
BEHONMOVEDOWN:TYPE=BEHAVIOUR
BEHONMOVEDOWN:CODE={ANNREKSIO^PLAY("DOWN");}


OBJECT=BEHMOVEDOWN
BEHMOVEDOWN:TYPE=BEHAVIOUR
BEHMOVEDOWN:CODE={BEHMOVE^RUN("0","4");CONDKEYUP^CHECK(TRUE);}


OBJECT=BEHONMOVELEFT
BEHONMOVELEFT:TYPE=BEHAVIOUR
BEHONMOVELEFT:CODE={ANNREKSIO^PLAY("LEFT");}


OBJECT=BEHMOVELEFT
BEHMOVELEFT:TYPE=BEHAVIOUR
BEHMOVELEFT:CODE={BEHMOVE^RUN(""-4"","0");CONDSUCCESS^ONE_BREAK(TRUE);CONDKEYUP^CHECK(TRUE);}


OBJECT=BEHMOVE
BEHMOVE:TYPE=BEHAVIOUR
BEHMOVE:CODE={VARITEMP1^SET([ANNREKSIO^GETPOSITIONX()+$1]);VARITEMP2^SET([ANNREKSIO^GETPOSITIONY()+$2]);VARITEMP3^SET($1);VARITEMP3^MUL(-1);VARITEMP4^SET($2);VARITEMP4^MUL(-1);CONDALPHA^ONE_BREAK(TRUE);ANNREKSIO^MOVE($1,$2);}


OBJECT=BEHNEXTDIR
BEHNEXTDIR:TYPE=BEHAVIOUR
BEHNEXTDIR:CODE={VARITEMP1^SET(THIS^GETCLONEINDEX());UFO^RUN(THIS^GETNAME(),"PLAY",ARRDIRS^GET(VARITEMP1));}


OBJECT=BEHCOLLISION
BEHCOLLISION:TYPE=BEHAVIOUR
BEHCOLLISION:CODE={VARSTEMP1^SET(THIS^GETNAME());VARITEMP1^SET(UFO^RUN(VARSTEMP1,"GETPOSITIONX"));VARITEMP2^SET(UFO^RUN(VARSTEMP1,"GETPOSITIONY"));VARSTEMP1^SET(THIS^GETNAME());CONDDETECT^CHECK(TRUE);}


OBJECT=BEHISNEAR
BEHISNEAR:TYPE=BEHAVIOUR
BEHISNEAR:CODE={UFO^RUN(VARSTEMP1,"PAUSE");VARDETECTCOLLISION^SET(0);ANNREKSIO^PAUSE();BEHRESTART^RUN();}


OBJECT=BEHRESTART
BEHRESTART:TYPE=BEHAVIOUR
BEHRESTART:CODE={VARITEMP1^SET(23);VARITEMP1^MUL(32);VARITEMP2^SET(9);VARITEMP2^MUL(32);ANNREKSIO^SETPOSITION(VARITEMP1,VARITEMP2);VARDETECTCOLLISION^SET(1);PRZYGODA^GOTO("S76");}



